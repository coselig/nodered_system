# H70 測試按鈕場景映射

## 場景執行測試按鈕

| 測試按鈕 | HMI命令 | 場景ID | 操作 | 說明 | MQTT主題 |
|---------|---------|--------|------|------|----------|
| 測試1 | `0xfe,0x06,0x08,0x20,0x01,0x05,0x5f,0xfc` | 0x05 | 0x01 | H40二樓 ON | `homeassistant/scene/0x05/0x01/execute/set` |
| 測試2 | `0xfe,0x06,0x08,0x20,0x02,0x05,0x5f,0x0c` | 0x05 | 0x02 | H40二樓 OFF | `homeassistant/scene/0x05/0x02/execute/set` |
| 測試3 | `0xfe,0x06,0x08,0x20,0x01,0x02,0x1e,0x3e` | 0x02 | 0x01 | 會議室 ON | `homeassistant/scene/0x02/0x01/execute/set` |
| 測試4 | `0xfe,0x06,0x08,0x20,0x02,0x02,0x1e,0xce` | 0x02 | 0x02 | 會議室 OFF | `homeassistant/scene/0x02/0x02/execute/set` |
| 測試5 | `0xfe,0x06,0x08,0x20,0x01,0x03,0xdf,0xfe` | 0x03 | 0x01 | 公共區 ON | `homeassistant/scene/0x03/0x01/execute/set` |
| 測試6 | `0xfe,0x06,0x08,0x20,0x02,0x03,0xdf,0x0e` | 0x03 | 0x02 | 公共區 OFF | `homeassistant/scene/0x03/0x02/execute/set` |
| 測試7 | `0xfe,0x06,0x08,0x20,0x01,0x04,0x9e,0x3c` | 0x04 | 0x01 | 戶外燈 ON | `homeassistant/scene/0x04/0x01/execute/set` |
| 測試8 | `0xfe,0x06,0x08,0x20,0x02,0x04,0x9e,0xcc` | 0x04 | 0x02 | 戶外燈 OFF | `homeassistant/scene/0x04/0x02/execute/set` |

## 場景記憶測試按鈕

| 測試按鈕 | HMI命令 | 場景ID | 操作 | 說明 | MQTT主題 |
|---------|---------|--------|------|------|----------|
| 記憶1 | `0xfe,0x06,0x08,0x20,0x81,0x01,0x3f,0xff` | 0x01 | 0x81 | 記憶ON狀態 | `homeassistant/memory/0x01/0x01/save/set` |
| 記憶2 | `0xfe,0x06,0x08,0x20,0x82,0x01,0x3f,0x0f` | 0x01 | 0x82 | 記憶OFF狀態 | `homeassistant/memory/0x01/0x02/save/set` |
| 記憶3 | `0xfe,0x06,0x08,0x20,0x83,0x01,0x3e,0x9f` | 0x01 | 0x83 | 記憶場景1 | `homeassistant/memory/0x01/0x03/save/set` |
| 記憶4 | `0xfe,0x06,0x08,0x20,0x84,0x01,0x3c,0xaf` | 0x01 | 0x84 | 記憶場景2 | `homeassistant/memory/0x01/0x04/save/set` |
| 記憶5 | `0xfe,0x06,0x08,0x20,0x85,0x01,0x3d,0x3f` | 0x01 | 0x85 | 記憶場景3 | `homeassistant/memory/0x01/0x05/save/set` |
| 記憶6 | `0xfe,0x06,0x08,0x20,0x86,0x01,0x3d,0xcf` | 0x01 | 0x86 | 記憶場景4 | `homeassistant/memory/0x01/0x06/save/set` |
| 記憶7 | `0xfe,0x06,0x08,0x20,0x87,0x01,0x3c,0x5f` | 0x01 | 0x87 | 記憶場景5 | `homeassistant/memory/0x01/0x07/save/set` |
| 記憶8 | `0xfe,0x06,0x08,0x20,0x88,0x01,0x39,0xaf` | 0x01 | 0x88 | 記憶場景6 | `homeassistant/memory/0x01/0x08/save/set` |

## MQTT 測試主題

可以直接發送 MQTT 訊息來觸發測試：

```bash
# H40二樓
mosquitto_pub -t "homeassistant/test/h70/scene/0x05/0x01" -m "ON"
mosquitto_pub -t "homeassistant/test/h70/scene/0x05/0x02" -m "ON"

# 會議室
mosquitto_pub -t "homeassistant/test/h70/scene/0x02/0x01" -m "ON"
mosquitto_pub -t "homeassistant/test/h70/scene/0x02/0x02" -m "ON"

# 公共區
mosquitto_pub -t "homeassistant/test/h70/scene/0x03/0x01" -m "ON"
mosquitto_pub -t "homeassistant/test/h70/scene/0x03/0x02" -m "ON"

# 戶外燈
mosquitto_pub -t "homeassistant/test/h70/scene/0x04/0x01" -m "ON"
mosquitto_pub -t "homeassistant/test/h70/scene/0x04/0x02" -m "ON"
```

## Node-RED 配置

在 Node-RED 中添加 MQTT 輸入節點，訂閱：
- `homeassistant/test/h70/scene/+/+`

然後連接到場景執行節點，轉換為：
- `homeassistant/scene/{sceneId}/{operation}/execute/set`
